#include <WiFi.h> 
#include "EmbeddedMqttBroker.h"
using namespace mqttBrokerName;

const char* ssid = "LaMartinaEG";           //SSID
const char* password = "OLZFLFGXYMLPLLJN"; //Passwort

uint16_t mqttPort = 8883;
MqttBroker broker(mqttPort);

void setup(){
  Serial.begin(115200);

  //WLAN Verbindung
  //SECURTY FÜR WIFI MUSS NOCH GEMACHT WERDEN
  Serial.println();
  Serial.println();
  Serial.print("Connecting to ");
  Serial.println(ssid);
  WiFi.mode(WIFI_STA);
  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED)
  {
    WiFi.begin(ssid, password);
    delay(500);
    Serial.print(".");
  }
  Serial.println("");
  Serial.println("WiFi connected");

  //Einrichtung LoRa Verbindung
      /*
      Einrichtung der gesamten LoRa Verbindung zum Broker
      Security für MQTT Verbindung (Zugangsbeschränkungen) über die LoRa Einrichtung
      */


  //Starten des Brokers
  broker.setMaxNumClients(9);
  broker.startBroker();
  Serial.println("Broker started!");

  //Ausgabe der Verbinungsdaten
  Serial.print("Use this IP: ");
  Serial.println(WiFi.localIP());
  Serial.print("Use this Port: ");
  Serial.println(mqttPort);
  Serial.println("");
}

void loop(){}
